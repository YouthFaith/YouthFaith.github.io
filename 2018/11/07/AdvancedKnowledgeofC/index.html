<!DOCTYPE html>





<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.3.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.3.0" color="#222">
  <meta name="google-site-verification" content="Mfi9qKlk-eXPFCoKeaSQS9tInGifF_4VftSzH9ucoss">
  <meta name="baidu-site-verification" content="LcRNZHLxU2">

<link rel="stylesheet" href="/css/main.css?v=7.3.0">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.3.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: true,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: './public/search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'Copy',
      copy_success: 'Copied',
      copy_failure: 'Copy failed'
    }
  };
</script>
<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">
<style>
    .pace .pace-progress {
        background: #00CDCD;
        height: 3px;
    }
    .pace .pace-progress-inner {
         box-shadow: 0 0 10px #00CDCD, 0 0 5px #00CDCD; 
    }
    .pace .pace-activity {
        border-top-color: #00CDCD;    
        border-left-color: #00CDCD;    
    }
</style>

  <meta name="description" content="Practice makes perfect.   Advanced Knowledge of FunctionMemory Management in Linux Basic principles of von Neumann architecture The basic physical organization of a modern computer, based on the von N">
<meta name="keywords" content="C Language,Advanced Knowledge">
<meta property="og:type" content="article">
<meta property="og:title" content="Advanced Knowledge of C Language">
<meta property="og:url" content="http://youthfaith.cn/2018/11/07/AdvancedKnowledgeofC/index.html">
<meta property="og:site_name" content="YouthFaith&#39;s Blog">
<meta property="og:description" content="Practice makes perfect.   Advanced Knowledge of FunctionMemory Management in Linux Basic principles of von Neumann architecture The basic physical organization of a modern computer, based on the von N">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-10-07T06:46:59.871Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Advanced Knowledge of C Language">
<meta name="twitter:description" content="Practice makes perfect.   Advanced Knowledge of FunctionMemory Management in Linux Basic principles of von Neumann architecture The basic physical organization of a modern computer, based on the von N">
  <link rel="canonical" href="http://youthfaith.cn/2018/11/07/AdvancedKnowledgeofC/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Advanced Knowledge of C Language | YouthFaith's Blog</title>
  <meta name="generator" content="Hexo 3.9.0">
  








  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">
  <div class="container use-motion">
    <div class="headband"></div>
<a href="https://github.com/YouthFaith" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; left: 0; transform: scale(-1, 1);" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style></a>
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">YouthFaith's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Welcome to My World!</p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-about">
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>About</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a href="javascript:;" class="popup-trigger">
        
          <i class="menu-item-icon fa fa-search fa-fw"></i> <br>Search</a>
      </li>
    
  </ul>

    

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-wrapper">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="Searching..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
      <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block post">
    <link itemprop="mainEntityOfPage" href="http://youthfaith.cn/2018/11/07/AdvancedKnowledgeofC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="YiHe Huang">
      <meta itemprop="description" content="YouthFaith's Blog">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YouthFaith's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">Advanced Knowledge of C Language

          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2018-11-07 12:07:06" itemprop="dateCreated datePublished" datetime="2018-11-07T12:07:06+08:00">2018-11-07</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-10-07 14:46:59" itemprop="dateModified" datetime="2019-10-07T14:46:59+08:00">2019-10-07</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a></span>

                
                
              
            </span>
          

          
            <span class="post-meta-item" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
            </span>
          
          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
                <span class="post-meta-item-text">Symbols count in article: </span>
              
              <span>41k</span>
            </span>
          
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              
                <span class="post-meta-item-text">Reading time &asymp;</span>
              
              <span>37 mins.</span>
            </span>
          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <blockquote class="blockquote-center"><p>Practice makes perfect. </p>
</blockquote>
<h2 id="Advanced-Knowledge-of-Function"><a href="#Advanced-Knowledge-of-Function" class="headerlink" title="Advanced Knowledge of Function"></a>Advanced Knowledge of Function</h2><h3 id="Memory-Management-in-Linux"><a href="#Memory-Management-in-Linux" class="headerlink" title="Memory Management in Linux"></a>Memory Management in Linux</h3><ol>
<li>Basic principles of von Neumann architecture<ul>
<li>The basic physical organization of a modern computer, based on the von Neumann architecture model, describes a design architecture for an electronic digital computer with these components<ul>
<li>A processing unit that contains an arithmetic logic unit and processor registers</li>
<li>A control unit that contains an instruction register and program counter</li>
<li>Memory that stores data and instructions</li>
<li>External mass storage</li>
<li>Input and output mechanisms<a id="more"></a></li>
</ul>
</li>
<li>Programs and data are arbitrarily stored into storage in binary code, whose locations are determined by their address.</li>
<li>The controller operates according to a sequence of instructions (programs) stored in memory and is controlled by a program counter (<strong>PC</strong>) to execute the instructions one by one.</li>
</ul>
</li>
<li>Running processes: code edit $\Rightarrow$ compile $\Rightarrow$ link $\Rightarrow$ load $\Rightarrow$ run<ul>
<li>Classification of linking: generate the logical address<ul>
<li>Static linking: use <code>gcc -static</code> to link object files into executable files and <code>ar -rc LibraryFile ObjectFile/SourceFile</code> to generate static library files whose prefix is <strong>lib</strong> and suffix is <strong>.a</strong>, and <code>ar -xv LibraryFile</code> to extract members from the archive.</li>
<li>Dynamic linking during loading or running: use <code>gcc -fPIC -shared ObjectFile/SourceFile -o LibraryFile</code> to generate dynamic library files whose prefix is <strong>lib</strong> and suffix is <strong>.so</strong>.</li>
</ul>
</li>
<li>Classification of loading: generate the physical address<ul>
<li>Absolute loading: only used in a single batch program environment.</li>
<li>Static relocation and dynamic relocation: usually used in the multichannel batch processing system, and the former happens during loading and the latter during running. And we can use <code>ldconfig Directory</code> to create the necessary links and cache to the most recent shared libraries found in the directories specified on the command line and use <code>ldd ExecutableFile</code> to print the shared objects (shared libraries) required by each program or shared object specified on the command line.</li>
</ul>
</li>
</ul>
</li>
<li>Virtual memory: <ul>
<li>The system allocates a virtual memory area to make processes independent with virtual addresses. The computer’s operating system, using a combination of hardware and software, maps memory addresses used by a program, called <em>virtual addresses</em>, into <em>physical addresses</em> in computer memory. Main storage, as seen by a process or task, appears as a contiguous address space or collection of contiguous segments. The operating system manages virtual address spaces and the assignment of real memory to virtual memory. Address translation hardware in the <strong>CPU</strong>, often referred to as a memory management unit or <strong>MMU</strong>, automatically translates virtual addresses to physical addresses. Software within the operating system may extend these capabilities to provide a virtual address space that can exceed the capacity of real memory and thus reference more memory than is physically present in the computer.</li>
<li><code>/proc/cpuinfo</code>: a collection of <strong>CPU</strong> and system architecture dependent items, for each supported architecture a different list. A 64-bit computers allocate 48 bits of virtual memory space (50% user-space: <code>[ 0x0000000000000000~0x00007FFFFFFFFFFF ]</code> and 50 % kernel-space: <code>[ 0xFFFF800000000000~ 0xFFFFFFFFFFFFFFFF ]</code>).</li>
<li><code>/proc/meminfo</code>: report statistics about memory usage on the system.</li>
<li><code>/proc/[pid]/maps</code>: a file containing the currently mapped memory regions and their access permissions.<ul>
<li><code>vsyscall</code>: virtual system call</li>
<li><code>vdso</code>: virtual dynamically linked shared object</li>
<li><code>stack</code>: the initial process’s (also known as the main thread’s) stack<ul>
<li>Local variable</li>
<li>Function parameter</li>
<li>Function return address</li>
</ul>
</li>
<li><code>xxx.so</code>: shared memory-mapped area</li>
<li><code>heap</code>: the process’s heap<ul>
<li>Dynamic memory allocation, like <code>malloc</code> and <code>realloc</code></li>
</ul>
</li>
<li><code>data segment</code>: static storage area (global variable and static variable) and constant area </li>
<li><code>code segment</code>: code area</li>
</ul>
</li>
<li>Segment-page memory management mechanism<ul>
<li>The virtual address contains segment number, page number and page offset.</li>
<li>The dynamic mapping between virtual addresses and physical addresses.</li>
<li><code>getconf PAGE_SIZE</code>: view size of a page</li>
</ul>
</li>
</ul>
</li>
<li>Common function in memory management:<ul>
<li><code>void *memset(void *s, int c, size_t n);</code>: fill the first <em>n</em> bytes of the memory area pointed to by <em>s</em> with the constant byte <em>c</em> and return a pointer to the memory area <em>s</em>.</li>
<li><code>void *memcpy(void *dest, const void *src, size_t n);</code>: copy <em>n</em> bytes from memory area <em>src</em> to memory area <em>dest</em>. The memory areas must not overlap. Please use <u>memmove</u>() if the memory areas do overlap and the function returns a pointer to <em>dest</em>.</li>
</ul>
</li>
</ol>
<h3 id="Scope-and-Storage-Type"><a href="#Scope-and-Storage-Type" class="headerlink" title="Scope and Storage Type"></a>Scope and Storage Type</h3><ol>
<li><p>Classification of scope</p>
<ul>
<li><p><code>global variable</code>: a variable with global scope, meaning that it is visible (hence accessible) throughout the program, unless shadowed. </p>
</li>
<li><p><code>local variable</code>:  a variable that is given local scope. Local variable references in the function or block in which it is declared override the same variable name in the larger scope.</p>
</li>
</ul>
</li>
<li>Storage type and link attribute of a variable:<ul>
<li><code>auto---none</code>: local variables are valid in a function during a period of the function calling and not initialized by default, generating random values. </li>
<li><code>static---internal</code>: static variables are always valid in a local area (one function or one source file) and live during the whole program execution. It is initialized by default once.</li>
<li><code>extern(global)---external</code>: its scope and life cycle are the whole programs, and it is initialized by default once.</li>
<li><code>register</code>: auto local variable is stored in the <strong>CPU</strong> register, accessed faster than memory and not initialized by default.</li>
</ul>
</li>
<li>Internal and external function<ul>
<li>Internal function: <code>static TataType FunctionName(FormalParameterList);</code>, only called in local source file.</li>
<li>External function: <code>(extern) TataType FunctionName(FormalParameterList);</code>, able to be called by other source file.</li>
</ul>
</li>
<li>Usage of <code>extern</code><ul>
<li>Declare/quote an external variable to expand the scope of the external variable.<ul>
<li>Declare external variable in a source file: to use the variable in the same file before the definition .</li>
<li>Quote external variable in multiple source files: to use the variable in the other file .</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="Function-Calling"><a href="#Function-Calling" class="headerlink" title="Function Calling"></a>Function Calling</h3><ol>
<li><p>Calling process of function is an operation of the stack space and we use the stack space to store the information about the called function.</p>
<ul>
<li>Establish stack space of the called function</li>
<li>Protect the running state and result address of the calling function</li>
<li>Pass the value of an argument to a procedure</li>
<li>Execute the statement in the called function body</li>
<li>Transfer control or return value to the calling function</li>
<li>Free the stack space of the called function</li>
</ul>
</li>
<li><p>Recursion</p>
<ul>
<li><p>Concept of recursion: most computer programming languages support recursion by allowing a function to call itself from within its own code. Some functional programming languages do not define any looping constructs but rely solely on recursion to repeatedly call code.</p>
</li>
<li><p>Feature:</p>
<ul>
<li>There are constraints and the recursion does not continue when the constraints are met.</li>
<li>Each recursive call gets closer and closer to the constraint.</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// converts a decimal integer to a character and outputs it</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">binary_to_ascii</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> value)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> temp;</span><br><span class="line">    temp = value / <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">if</span> (temp)</span><br><span class="line">        binary_to_ascii(temp);</span><br><span class="line">    <span class="built_in">putchar</span>(value % <span class="number">10</span> + <span class="string">'0'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>** argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> number = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Please input a number:"</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;number);</span><br><span class="line">    binary_to_ascii(number);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<pre><code> <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// implement fibonacci</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fibonacci</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> fibonacci(n - <span class="number">2</span>) + fibonacci(n - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Please input a number:"</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d "</span>, fibonacci(i));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</code></pre><h3 id="Function-Pointer"><a href="#Function-Pointer" class="headerlink" title="Function Pointer"></a>Function Pointer</h3><ol>
<li><p>Concept of function pointer:  a pointer that points to a function.</p>
</li>
<li><p>Format of function pointer</p>
<ul>
<li><p>Definition: <code>DataType (*FunctionPointerName)(FormalParameterList);</code></p>
</li>
<li><p>Initialization: <code>FunctionPointerName = FunctionName;</code></p>
</li>
<li><p>Calling: <code>FunctionPointerName(ActualParameterList);</code> or  <code>(*FunctionPointerName)(ActualParameterList);</code></p>
</li>
</ul>
</li>
<li><p>Callback function</p>
<ul>
<li><p>Concept: a function called through function pointer</p>
</li>
<li><p>Instead of being called directly by the implementer of the function, a callback function is called by another party when a particular event or condition occurs and is used to respond to that event or condition.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// use callback functions to call different sorting algorithms to sort array elements</span></span><br><span class="line"><span class="comment">//src/callback_sort_test.c</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"callback_sort.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init_data</span><span class="params">(<span class="keyword">int</span>* p, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, p + i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">out_data</span><span class="params">(<span class="keyword">int</span>* p, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d "</span>, *(p + i));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>** argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = <span class="number">0</span>, choose = <span class="number">0</span>;</span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">"0:bubble_sort\n1:select_sort\nWhich sorting method would you like to</span></span><br><span class="line"><span class="string"> test:"</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;choose);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"How many numbers would you like to input:"</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">int</span> *data = (<span class="keyword">int</span>*)<span class="built_in">malloc</span>(n * siz**EOF**(<span class="keyword">int</span>));</span><br><span class="line">    init_data(data, n);</span><br><span class="line">    <span class="keyword">if</span>(choose==<span class="number">0</span>)</span><br><span class="line">    	data_sort(data, n, bubble_sort, out_data);</span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">        data_sort(data, n, select_sort, out_data);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//include/callback_sort.h</span></span><br><span class="line"><span class="function"><span class="keyword">extern</span> <span class="keyword">void</span> <span class="title">data_sort</span><span class="params">(<span class="keyword">int</span>*, <span class="keyword">int</span>, <span class="keyword">void</span> (*)(<span class="keyword">int</span>*, <span class="keyword">int</span>), <span class="keyword">void</span> (*)(<span class="keyword">int</span>*, <span class="keyword">int</span>))</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">extern</span> <span class="keyword">void</span> <span class="title">bubble_sort</span><span class="params">(<span class="keyword">int</span>*, <span class="keyword">int</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">extern</span> <span class="keyword">void</span> <span class="title">select_sort</span><span class="params">(<span class="keyword">int</span>*, <span class="keyword">int</span>)</span></span>;</span><br><span class="line"><span class="comment">//src/callback_sort.c</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bubble_sort</span><span class="params">(<span class="keyword">int</span>* p, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> flag = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = n - <span class="number">1</span>; j &gt; i; j--) &#123;</span><br><span class="line">            <span class="keyword">if</span> (*(p + j - <span class="number">1</span>) &gt; *(p + j)) &#123;</span><br><span class="line">                <span class="keyword">int</span> temp = *(p + j);</span><br><span class="line">                *(p + j) = *(p + j - <span class="number">1</span>);</span><br><span class="line">                *(p + j - <span class="number">1</span>) = temp;</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!flag)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">select_sort</span><span class="params">(<span class="keyword">int</span>* p, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> min = i;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (*(p + j) &lt; *(p + min))</span><br><span class="line">                min = j;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (min != i) &#123;</span><br><span class="line">            <span class="keyword">int</span> temp = *(p + min);</span><br><span class="line">            *(p + min) = *(p + i);</span><br><span class="line">            *(p + i) = temp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">data_sort</span><span class="params">(<span class="keyword">int</span>* p, <span class="keyword">int</span> n, <span class="keyword">void</span> (*sort)(<span class="keyword">int</span>*, <span class="keyword">int</span>), <span class="keyword">void</span> (*out)(<span class="keyword">int</span>*, <span class="keyword">int</span>))</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    sort(p, n);</span><br><span class="line">    out(p, n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// use function pointer array to realize calculator function</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">float</span> <span class="title">add</span><span class="params">(<span class="keyword">float</span> i, <span class="keyword">float</span> j)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> i + j;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">float</span> <span class="title">sub</span><span class="params">(<span class="keyword">float</span> i, <span class="keyword">float</span> j)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> i - j;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">float</span> <span class="title">mul</span><span class="params">(<span class="keyword">float</span> i, <span class="keyword">float</span> j)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> i * j;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">float</span> <span class="title">div</span><span class="params">(<span class="keyword">float</span> i, <span class="keyword">float</span> j)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> i / j;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">show_menu</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"********************************\n"</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"1:add two numbers\n"</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"2:sub two numbers\n"</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"3:mul two numbers\n"</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"4:div two numbers\n"</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"0:quit\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">float</span> (*fun_array[])(<span class="keyword">float</span>, <span class="keyword">float</span>) = &#123; add, sub, mul, div &#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>** argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> cmd = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">        show_menu();</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;cmd);</span><br><span class="line">        <span class="keyword">if</span> (!cmd)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"Please input number1 and number2:"</span>);</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;i, &amp;j);</span><br><span class="line">            <span class="keyword">float</span> res = (**(fun_array + cmd - <span class="number">1</span>))(i, j);</span><br><span class="line">            <span class="comment">// float res = fun_array[cmd-1](i, j);</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"Result:%g\n"</span>, res);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h3 id="Variable-Argument-List"><a href="#Variable-Argument-List" class="headerlink" title="Variable Argument List"></a>Variable Argument List</h3><ol>
<li><p>Concept of the variable argument list: the numbers of function arguments are variable, such as this function prototype: <code>int scanf(const char *format, ...);</code>.</p>
</li>
<li><p>Usage of variable argument list: three macros (<strong>va_start</strong>, <strong>va_arg</strong>, <strong>va_end</strong>) and a data type (<strong>va_list</strong>).</p>
<ul>
<li><p><code>void va_start(va_list ap, last);</code>: initialize <em>ap</em> for subsequent use by <u>va_arg</u>() and <u>va_end</u>(), and must be called first. The argument <em>last</em> is the name of the last argument before the  variable argument list, that is, the last argument of which the calling function knows the type. Because the address of this argument may  be  used  in  the  <u>va_start</u>() macro,  it should not be declared as a register variable, or as a function or an array type.</p>
</li>
<li><p><code>type va_arg(va_list ap, type);</code>: expand to an expression that has the type and value of  the  next  argument in the call.  The argument <em>ap</em> is the <u>va_list</u> <em>ap</em> initialized by <u>va_start</u>().  Each call to <u>va_arg</u>() modifies <em>ap</em>  so  that the  next  call returns the next argument.  The argument <em>type</em> is a type name specified so that the type of a pointer to an object that has  the specified type can be obtained simply by adding a <em> to </em>type<em>. The  first use of the <u>va_arg</u>() macro after that of the <u>va_start</u>() macro returns the argument after </em>last<em>.   Successive  invocations  return  the values of the remaining arguments. If  there  is  no  next argument, or if </em>type<em> is not compatible with the type of the actual next argument (as promoted according to the  default argument promotions), random errors will occur. If </em>ap<em> is passed to a function that uses <u>va_arg</u>(<u>ap, type</u>), then the value of </em>ap* is undefined after the return of that function.   </p>
</li>
<li><p><code>void va_end(va_list ap);</code>: be matched by a corresponding  invocation of <u>va_end</u>() in the same function.  After the call <u>va_end</u>(<u>ap</u>) the variable <em>ap</em> is undefined.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// use the variable parameter list to calculate the average value of a group of Numbers</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdarg.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">float</span> <span class="title">average</span><span class="params">(<span class="keyword">int</span> n_value, ...)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    va_list var_arg;</span><br><span class="line">    <span class="keyword">float</span> sum = <span class="number">0</span>;</span><br><span class="line">    va_start(var_arg, n_value);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> count = <span class="number">0</span>; count &lt; n_value; count++) &#123;</span><br><span class="line">        sum += va_arg(var_arg, <span class="keyword">int</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    va_end(var_arg);</span><br><span class="line">    <span class="keyword">return</span> sum / n_value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">float</span> aver = average(<span class="number">5</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"aver: %g.\n"</span>, aver);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h2 id="Basic-Knowledge-of-String"><a href="#Basic-Knowledge-of-String" class="headerlink" title="Basic Knowledge of String"></a>Basic Knowledge of String</h2><h3 id="Character-Array"><a href="#Character-Array" class="headerlink" title="Character Array"></a>Character Array</h3><ol>
<li>Basic concept: a character array is an array of characters and a string is any sequence of characters enclosed in double quotation marks.</li>
<li><p>Initialization of character array: <code>char ArrayName[] = { CharSequence };</code>. When we initialize character array in this way, <code>&#39;\0&#39;</code> is supposed to be used to end the array. </p>
<ul>
<li><code>char array[] = {&#39;Y&#39;,&#39;o&#39;,&#39;u&#39;,&#39;t&#39;,&#39;h&#39;,&#39;F&#39;, &#39;a&#39;, &#39;i&#39;, &#39;t&#39;,&#39;h&#39;, &#39;\0&#39;}</code> or <code>{&quot;YouthFaith&quot;}</code> or <code>&quot;YouthFaith&quot;;</code> and the length is 10 while the size is 11 bytes.</li>
</ul>
</li>
<li><p>Input and output of character array once</p>
<ul>
<li><code>scanf(&quot;%s&quot;, ArrayName);</code></li>
<li><code>printf(&quot;%s&quot;, ArrayName);</code></li>
</ul>
</li>
<li><p>Pointer to string: <code>char *PointerName = &quot; StringConstant &quot;;</code> and <strong>StringConstant</strong> which can’t be modified but can be read, is stored into constants area in a data segment.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// calculate the average length of words in a sentence</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> letter = <span class="number">0</span>, word = <span class="number">0</span>, flag = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> <span class="built_in">array</span>[<span class="number">30</span>] = <span class="string">"\0"</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Please input a sentence:"</span>);</span><br><span class="line">    fgets(<span class="built_in">array</span>, <span class="keyword">sizeof</span>(<span class="built_in">array</span>), <span class="built_in">stdin</span>);</span><br><span class="line">    <span class="keyword">int</span> n = <span class="built_in">strlen</span>(<span class="built_in">array</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">char</span> ch = <span class="built_in">array</span>[i];</span><br><span class="line">        <span class="keyword">if</span> (ch == <span class="string">'\n'</span>)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">if</span> (ch == <span class="string">' '</span> || ch == <span class="string">'\t'</span>) &#123;</span><br><span class="line">            flag = <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!flag &amp;&amp; ch != <span class="string">' '</span> &amp;&amp; ch != <span class="string">'\t'</span>) &#123;</span><br><span class="line">            word++;</span><br><span class="line">            flag = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (ch != <span class="string">' '</span> &amp;&amp; ch != <span class="string">'\t'</span>)</span><br><span class="line">            letter++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Average word length:%g.\n"</span>, (<span class="keyword">float</span>)letter / word);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>The common system functions about dealing with string</p>
<ul>
<li><code>char *gets(char *s);</code>: read a line from <em>stdin</em> into the buffer pointed to by <em>s</em> until either a terminating newline or <strong>EOF</strong>, which it replaces with a null byte (<strong>‘\0’</strong>). It return s on success, and <strong>NULL</strong> on error or when end of file occurs while no characters have been read. However, given the lack of buffer overrun checking, there can be no guarantees that the function will even return.</li>
<li><code>int puts(const char *s);</code>: write the string <em>s</em> and a trailing newline to <em>stdout</em>. It returns a nonnegative number on success, or <strong>EOF</strong> on error.</li>
<li><code>size_t strlen(const char *s);</code> calculates the length of the string pointed to by <em>s</em>, excluding the terminating null byte (<strong>‘\0</strong>‘). It returns the number of characters in the string pointed  to  by  <em>s</em>.</li>
<li><code>char *strcpy(char *dest, const char *src);</code> copies the string pointed to by <em>src</em>, including the terminating null byte (<strong>‘\0</strong>‘), to the buffer pointed to by <em>dest</em>. It returns a pointer to the destination string <em>dest</em>.</li>
<li><code>char *strncpy(char *dest, const char *src, size_t n);</code> is similar to <em>strcpy</em>, except that at most n bytes of <em>src</em> are copied. It returns a pointer to the destination string <em>dest</em>. </li>
<li><code>char *strcat(char *dest, const char *src);</code> appends the <em>src</em> string to the <code>dest</code> string, overwriting the terminating null byte (<strong>‘\0</strong>‘) at the end of <em>dest</em>, and then adds a terminating null byte. It returns a pointer to the resulting string <em>dest</em>.</li>
<li><code>char *strncat(char *dest, const char *src, size_t n);</code> is similar to <em>strcat</em> except that it will use at most n bytes from <em>src</em> and <em>src</em> does not need to be null-terminated if it contains n or more bytes. It returns a pointer to the resulting string <em>dest</em>.</li>
<li><code>int strcmp(const char *s1, const char *s2);</code> compares the two strings <em>s1</em> and <em>s2</em> according to ASCII. It returns an  integer  less  than,  equal  to,  or greater than zero if <em>s1</em> (or the first n bytes thereof) is found, respectively, to be less than, to match, or be greater than <em>s2</em>.</li>
<li><code>int strncmp(const char *s1, const char *s2, size_t n);</code> is similar to <em>strcmp</em>, except it compares only the first (at most) n bytes of <em>s1</em> and <em>s2</em>. It returns an  integer  less  than,  equal  to,  or greater than zero if <em>s1</em> (or the first n bytes thereof) is found, respectively, to be less than, to match, or be greater than <em>s2</em>.</li>
<li><code>char *strtok(char *str, const char *delim);</code> breaks a string into a sequence of zero or more nonempty tokens. It returns a pointer to the next token, or <strong>NULL</strong> if there are no more tokens.</li>
<li><code>char *strchr(const char *s, int c);</code> returns a pointer to the first occurrence of the character <em>c</em> in the string <em>s</em>. It returns a pointer to the matched character or <strong>NULL</strong> if the character is not found.  The terminating null byte is considered part of the  string,  so that if <em>c</em> is specified as <strong>‘\0’</strong>, these functions return a pointer to the terminator.</li>
<li><code>char *strrchr(const char *s, int c);</code> returns a pointer to the last occurrence of the character <em>c</em> in the string <em>s</em>. It returns a pointer to the matched character or <strong>NULL</strong> if the character is not found.  The terminating null byte is considered part of the  string,  so that if <em>c</em> is specified as <strong>‘\0’</strong>, these functions return a pointer to the terminator.</li>
</ul>
</li>
</ol>
<h2 id="Standard-Library-Functions"><a href="#Standard-Library-Functions" class="headerlink" title="Standard Library Functions"></a>Standard Library Functions</h2><h3 id="Common-Functions-in-stdlib-h"><a href="#Common-Functions-in-stdlib-h" class="headerlink" title="Common Functions in stdlib.h"></a>Common Functions in stdlib.h</h3><ol>
<li><code>int abs(int j);</code> and <code>long int labs(long int j);</code></li>
<li><code>int rand(void);</code> and <code>void srand(unsigned int seed);</code></li>
<li><code>int atoi(const char *nptr);</code> and <code>long atol(const char *nptr);</code></li>
<li><code>double atof(const char *nptr);</code></li>
</ol>
<h3 id="Common-Functions-in-math-h"><a href="#Common-Functions-in-math-h" class="headerlink" title="Common Functions in math.h"></a>Common Functions in math.h</h3><ol>
<li><code>double sin(double x);</code></li>
<li><code>double cos(double x);</code></li>
<li><code>double tan(double x);</code></li>
<li><code>double exp(double x);</code></li>
<li><code>double pow(double x, double y);</code></li>
</ol>
<h3 id="Common-Functions-in-time-h"><a href="#Common-Functions-in-time-h" class="headerlink" title="Common Functions in time.h"></a>Common Functions in time.h</h3><ol>
<li><p><code>time_t time(time_t *tloc);</code></p>
</li>
<li><p><code>char *ctime(const time_t *timep);</code></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// implement the timer</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>** argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (argc != <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Usage:%s &lt;number&gt;\n"</span>, argv[<span class="number">0</span>]);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> duration = atoi(argv[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">if</span> (duration &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Duration error\n"</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">time_t</span> start, current;</span><br><span class="line">    time(&amp;start);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Start time:%s"</span>, ctime(&amp;start));</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        time(&amp;current);</span><br><span class="line">    &#125; <span class="keyword">while</span> ((current - start) != duration);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Current time:%s"</span>, ctime(&amp;current));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="Structure-and-Union"><a href="#Structure-and-Union" class="headerlink" title="Structure and Union"></a>Structure and Union</h2><h3 id="What-is-Structure"><a href="#What-is-Structure" class="headerlink" title="What is Structure"></a>What is Structure</h3><ol>
<li><p>Concept of structure: a collection of data of the same or different types.</p>
</li>
<li><p>Declaration of structure: <code>struct StructName{ MemberList };</code> The system doesn’t allocate real memory at the time of declaration.</p>
</li>
<li><p>Definition of structure:</p>
<ul>
<li><code>struct StructName VariableName1, ... ,VariableNamen;</code>.</li>
<li><code>struct [StructName] { MemberList } VariableName1, ... ,VariableNamen;</code>.</li>
</ul>
</li>
<li><p>Initialization of structure</p>
<ul>
<li><code>struct StructName VariableNamen = { MemberValueList }, ... ;</code>.</li>
<li><code>struct [StructName] { MemberList } VariableNamen = { MemberValueList }, ... ;</code>.</li>
</ul>
</li>
<li><p>Access of structure member</p>
<ul>
<li>For structure variable: <code>StructName.MemberName</code>.</li>
<li>For structure pointer: <code>StructPointer-&gt;MemberName</code> or <code>(*StructPointer)-&gt;MemberName</code>.</li>
<li>Specially, structure member can be a structure pointer to itself for chain table and structure declaration can be incomplete to make different structures dependent on each other.</li>
</ul>
</li>
<li><p>Assignment of structure: <code>StructVariableName = AnotherStructVariableName;</code> or</p>
<p> <code>StructVariableName.MemberName = VariableValue;</code>.</p>
</li>
<li><p>Nest of structure: <code>struct [StructName] { ... struct StructName VariableName ... };</code>.</p>
 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// implement a clock</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> hour;</span><br><span class="line">    <span class="keyword">int</span> min;</span><br><span class="line">    <span class="keyword">int</span> sec;</span><br><span class="line">&#125; Clock;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delay</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">time_t</span> start, current;</span><br><span class="line">    time(&amp;start);</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        time(&amp;current);</span><br><span class="line">    &#125; <span class="keyword">while</span> ((current - start) != <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">increment</span><span class="params">(Clock* p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    p-&gt;sec++;</span><br><span class="line">    <span class="keyword">if</span> (p-&gt;sec == <span class="number">60</span>) &#123;</span><br><span class="line">        p-&gt;sec = <span class="number">0</span>;</span><br><span class="line">        p-&gt;min++;</span><br><span class="line">        <span class="keyword">if</span> (p-&gt;min == <span class="number">60</span>) &#123;</span><br><span class="line">            p-&gt;min = <span class="number">0</span>;</span><br><span class="line">            p-&gt;hour++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">(Clock* p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    system(<span class="string">"clear"</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%02d:%02d:%02d\n"</span>, p-&gt;hour, p-&gt;min, p-&gt;sec);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Clock c = &#123; <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span> &#125;;</span><br><span class="line">    <span class="keyword">int</span> sec = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Please enter how much time do you want to time(s):"</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;sec);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; sec; i++) &#123;</span><br><span class="line">        delay();</span><br><span class="line">        increment(&amp;c);</span><br><span class="line">        show(&amp;c);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="Byte-Alignment"><a href="#Byte-Alignment" class="headerlink" title="Byte Alignment"></a>Byte Alignment</h3><ol>
<li>Concept of byte alignment: The various types of data are arranged according to certain rules, rather than being stored sequentially one by one.</li>
<li>Specifies the number of byte alignments: <code>#pragma pack(Bytes)</code> and <code>#pragma pack()</code>.</li>
<li>Rules: <ul>
<li>Basic data types are byte-aligned to their size.</li>
<li>Structure data types are byte-aligned to the maximum size of its member variables.</li>
<li>Especially, valid alignment value is the smaller one between self-defined and original ones. So, Members of a structure are supposed to be defined by type from small to large.</li>
</ul>
</li>
<li>Bitfield: a member variable can be a bit in a structure.<ul>
<li>Definition of bit field: <code>DataType [BitFieldName]:Length</code>.</li>
<li>Thereamong, <code>Length</code> can’t exceed the size of <code>DataType</code>.</li>
</ul>
</li>
</ol>
<h3 id="What-is-Union"><a href="#What-is-Union" class="headerlink" title="What is Union"></a>What is Union</h3><ol>
<li>Concept of the union: Different types of variables are stored in the same segment of memory.</li>
<li>Declaration of union: <code>union UnionName { UnionMemberList };</code>.</li>
<li>Initialization of union: must be the first member variable.</li>
</ol>
<h3 id="Difference-Between-Typedef-and-Define"><a href="#Difference-Between-Typedef-and-Define" class="headerlink" title="Difference Between Typedef and Define"></a>Difference Between Typedef and Define</h3><ol>
<li>Usage of typedef<ul>
<li>Function time: compile.</li>
<li>Define another name for a data type: <code>typedef OldDataType NewDataType;</code>.</li>
<li>Define a new simple alias for a complex declaration: <code>typedef DataTypeExpressionWithAlias;</code>. For example, <code>void (*a)(void);</code> $\Rightarrow$ <code>typedef void (*Alias)(void); Alias a;</code>.</li>
</ul>
</li>
<li>Usage of define<ul>
<li>Function time: preprocess.</li>
<li>Replace old string with new string: <code>#define NewString OldString</code>.</li>
</ul>
</li>
</ol>
<h2 id="Advanced-Knowledge-of-Pointer"><a href="#Advanced-Knowledge-of-Pointer" class="headerlink" title="Advanced Knowledge of Pointer"></a>Advanced Knowledge of Pointer</h2><h3 id="Untyped-Pointer"><a href="#Untyped-Pointer" class="headerlink" title="Untyped Pointer"></a>Untyped Pointer</h3><ol>
<li>Concept of untyped pointer: able to point to any variable in any type.</li>
<li>Definition of untyped pointer: <code>void *PointerName</code>.</li>
<li>Usage of untyped pointer: <code>(DataType*)PointerName</code> If you want to get the value of the variable using an untyped pointer, you need to transform the untyped pointer to a typed pointer that matches the variable type.</li>
<li>Access to memory: <code>DataType *PointerName = (DataType*)MemoryAddress;</code>.</li>
</ol>
<h3 id="Two-dimensional-Array"><a href="#Two-dimensional-Array" class="headerlink" title="Two-dimensional Array"></a>Two-dimensional Array</h3><ol>
<li><p>Two-dimensional array address</p>
<ul>
<li><p>Row address: Subscript-th row address</p>
<ul>
<li><code>ArrayName + Subscript</code></li>
</ul>
</li>
<li><p>Column address: Subscript-th row first column address</p>
<ul>
<li><code>ArrayName[Subscript]</code> $\Rightarrow$ <code>*(ArrayName + Subsript)</code></li>
</ul>
</li>
<li><p>Element address:</p>
<ul>
<li><code>ArrayName[Row]+Column</code></li>
<li><code>*(ArrayName+Row)+Column</code></li>
<li><code>&amp;ArrayName[Row][Column]</code></li>
</ul>
</li>
<li><p>Element value:</p>
<ul>
<li><code>*(ArrayName[Row]+Column)</code></li>
<li><code>*(*(ArrayName+Row)+Column)</code></li>
<li><code>ArrayName[Row][Column]</code></li>
</ul>
</li>
<li><p>Specially, <code>*RowAddress</code> = <code>ColumnAddress</code>, <code>RowAddress</code> = <code>&amp;ColumnAddress</code></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// usage of two-dimensional array address in function</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">out1</span><span class="params">(<span class="keyword">int</span> a[][<span class="number">3</span>], <span class="keyword">int</span> row, <span class="keyword">int</span> col)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"*********out1*********\n"</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; row; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; col; j++) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d "</span>, a[i][j]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">out2</span><span class="params">(<span class="keyword">int</span>* p, <span class="keyword">int</span> size)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"*********out2*********"</span>);</span><br><span class="line">    <span class="keyword">int</span>* s = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">for</span> (s = p; s &lt; p + size; s++) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((s - p) % <span class="number">3</span> == <span class="number">0</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d "</span>, *s);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">out3</span><span class="params">(<span class="keyword">int</span> (*p)[<span class="number">3</span>], <span class="keyword">int</span> row, <span class="keyword">int</span> col)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"*********out3*********\n"</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; row; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; col; j++) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d "</span>, *(*(p + i) + j));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>** argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    srand(time(<span class="number">0</span>));</span><br><span class="line">    <span class="keyword">int</span> arr[<span class="number">3</span>][<span class="number">3</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">3</span>; j++) &#123;</span><br><span class="line">            *(*(arr + i) + j) = rand() % <span class="number">90</span> + <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    out1(arr, <span class="number">3</span>, <span class="number">3</span>);</span><br><span class="line">    out2(*arr, <span class="number">9</span>);</span><br><span class="line">    out3(arr, <span class="number">3</span>, <span class="number">3</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h3 id="Pointer-Array"><a href="#Pointer-Array" class="headerlink" title="Pointer Array"></a>Pointer Array</h3><ol>
<li><p>Concept of pointer array: an array of pointer to other variables stored in other memory.</p>
</li>
<li><p>Definition of pointer array: <code>DataType *ArrayName[] = { PointerList };</code>.</p>
</li>
<li><p>A secondary pointer can be used to point to the first address of the pointer array.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// input several student names from the keyboard and sort them</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX 20</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">outStudent</span><span class="params">(<span class="keyword">char</span>** p, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%s "</span>, *(p + i));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sortStudent</span><span class="params">(<span class="keyword">char</span>** p, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> flag = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = n - <span class="number">1</span>; j &gt; i; j--) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">strcmp</span>(*(p + j), *(p + j - <span class="number">1</span>)) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">char</span>* temp = *(p + j);</span><br><span class="line">                *(p + j) = *(p + j - <span class="number">1</span>);</span><br><span class="line">                *(p + j - <span class="number">1</span>) = temp;</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!flag)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"How many students do you want to sort:"</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">char</span>** p = (<span class="keyword">char</span>**)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">char</span>*) * n);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Please input their score one by one:"</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">char</span> temp[MAX] = <span class="string">"\0"</span>;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">" %s"</span>, temp);</span><br><span class="line">        *(p + i) = (<span class="keyword">char</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">char</span>) * (<span class="built_in">strlen</span>(temp) + <span class="number">1</span>));</span><br><span class="line">        <span class="built_in">strcpy</span>(*(p + i), temp);</span><br><span class="line">    &#125;</span><br><span class="line">    outStudent(p, n);</span><br><span class="line">    sortStudent(p, n);</span><br><span class="line">    outStudent(p, n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="Dynamic-Memory-Allocation"><a href="#Dynamic-Memory-Allocation" class="headerlink" title="Dynamic Memory Allocation"></a>Dynamic Memory Allocation</h2><h3 id="Memory-Allocation"><a href="#Memory-Allocation" class="headerlink" title="Memory Allocation"></a>Memory Allocation</h3><ol>
<li>Static storage area: Memory allocation has been finished after program compiling, like global variable and static variable.</li>
<li>Stack area: Storage cells of a local variable are created during function calling and they will be freed automatically as the function returns.</li>
<li>Heap area: Programmers can apply for any storage are in heap during runtime and free them manually with some functions like <code>malloc</code> or <code>realloc</code>.</li>
</ol>
<h3 id="Common-Functions"><a href="#Common-Functions" class="headerlink" title="Common Functions"></a>Common Functions</h3><ol>
<li><code>void *malloc(size_t size);</code>: allocates <em>size</em> bytes and returns a pointer to the allocated memory. The memory is not initialized.</li>
<li><code>void *calloc(size_t nmemb, size_t size);</code>: allocates memory for an array of <em>nmemb</em> elements of <em>size</em> bytes each and returns a pointer to the allocated memory. The memory is set to zero.</li>
<li><code>void *realloc(void *ptr, size_t size);</code>: changes the size of the memory block pointed to by <em>ptr</em> to <em>size</em> bytes. The contents will be unchanged in the range from the start of the region up to the minimum of the old and new sizes. If the new size is larger than the old size, the added memory will not be initialized. If <em>ptr</em> is <strong>NULL</strong>, then the call is equivalent to <u>malloc</u>(size), for all values of size; if the size is equal to zero, and <em>ptr</em> is not <strong>NULL</strong>, then the call is equivalent to <u>free</u>(ptr).</li>
<li><code>void free(void *ptr);</code>: frees the memory space pointed to by <em>ptr</em>, which must have been returned by a previous call to <u>malloc</u>(), <u>calloc</u>(), or <u>realloc</u>().</li>
</ol>
<h2 id="Preprocess"><a href="#Preprocess" class="headerlink" title="Preprocess"></a>Preprocess</h2><h3 id="What-is-Preprocess"><a href="#What-is-Preprocess" class="headerlink" title="What is Preprocess"></a>What is Preprocess</h3><ul>
<li>Concept of preprocessing: Preprocessing generally is considered as the process of generating binary code before the source code of a program is translated into object code. Typically, the program source code text is processed by a preprocessor, and the result is further compiled by the compiler core. This process does not parse the program’s source code, but it splits or divides the source code into specific units —- preprocessing tokens, to support language features. It takes lines beginning with ‘#’ as directives. Because it knows nothing about the underlying language, its use has been criticized and many of its features built directly into other languages. For example, macros replaced with aggressive inlining and templates, includes with compile-time imports (this requires the preservation of type information in the object code, making this feature impossible to retrofit into a language); conditional compilation is effectively accomplished with <code>if-then-else</code> and dead code elimination in some languages. However, a key point to remember is that all preprocessor directives should start on a new line.</li>
</ul>
<h3 id="Macro-Substitution"><a href="#Macro-Substitution" class="headerlink" title="Macro Substitution"></a>Macro Substitution</h3><ol>
<li>Format of the macro: <code>#define NewString OldString</code>. <strong>NewString</strong> is replaced with <strong>OldString</strong> during preprocessing and it’s essentially a substitution of strings.</li>
<li>Predefined macro:<ul>
<li><code>__FILE__</code>: source file name</li>
<li><code>__LINE__</code>: line number during runtime</li>
<li><code>__DATE__</code>: a current day in the form —- <strong>month day year</strong></li>
<li><code>__TIME__</code>: current time in the form —- <strong>hour:minute:second</strong> </li>
<li><code>__func__</code>: current called function name</li>
</ul>
</li>
</ol>
<h3 id="Conditional-Compile"><a href="#Conditional-Compile" class="headerlink" title="Conditional Compile"></a>Conditional Compile</h3><ol>
<li><p>Concept of conditional compile: Normally, every line of code is compiled. However, sometimes for the consideration of program code optimization, we want to compile only part of the contents. At this time, we need to add conditions in the program and let the compiler compile the code that meets the conditions, and discard the code that does not meet the conditions.</p>
</li>
<li><p>Usage of conditional compile: <code>#if</code>, <code>#elif</code>, <code>#else</code>, <code>#ifndef</code>, <code>#ifdef</code>, <code>#define</code>, <code>#endif</code>, <code>#error</code>, <code>#line</code>, <code>#pragma</code></p>
</li>
</ol>
<h3 id="File-Including"><a href="#File-Including" class="headerlink" title="File Including"></a>File Including</h3><ol>
<li><p>Header file references are defined in double quotation marks and system header file references in angle brackets.</p>
</li>
<li><p>Lookup order of header files: the directory where the source files have located $\rightarrow$ the directory specified by <code>-I</code> $\rightarrow$ system environment path</p>
</li>
<li><p>Usually, conditional compile is used to prevent multiple inclusions, like <code>#ifndef ... #define ... #endif</code>.</p>
</li>
</ol>
<h2 id="File-Operation"><a href="#File-Operation" class="headerlink" title="File Operation"></a>File Operation</h2><h3 id="File-System"><a href="#File-System" class="headerlink" title="File System"></a>File System</h3><ol>
<li><p>Concept of file: a collection of information stored in a computer’s hard disk. From the user’s point of view, files can be divided into ordinary files and device files. According to the way of file encoding, files are divided into text files and binary files.</p>
</li>
<li><p>Classification of the file system</p>
<ul>
<li>Buffered file system: The system automatically creates a buffer in the memory area for each file in use. Either reading data from disk to memory or writing data from memory to disk needs to go through a buffer. Generally, data is sent to a designated location only when the buffer is full. And a buffered file system is called standard input and output.</li>
<li>Unbuffered file system: Buffers are not automatically set by the system, but by the user, as needed. And the unbuffered file system is called system input and output.</li>
</ul>
</li>
<li><p>Three standard streams</p>
<ul>
<li><code>stdin(0)</code>: standard input keyboard</li>
<li><code>stdout(1)</code>: standard output screen</li>
<li><code>stderr(2)</code>: standard output screen</li>
<li><code>/dev/null</code>: a special device file, called black hole, discards all written data</li>
</ul>
</li>
</ol>
<h3 id="File-Pointer"><a href="#File-Pointer" class="headerlink" title="File Pointer"></a>File Pointer</h3><ol>
<li><p>Definition of file pointer: <code>FILE *PointerName</code>. The system automatically creates a file type structure variable for it and return a pointer to it when we open a file. The program use this pointer to access file and get information. </p>
</li>
<li><p>Mode of file pointer: The argument mode points to a string beginning with one of th following sequences (possibly followed by additional characters, as described below).</p>
<ul>
<li><code>r</code>: open text file for reading. The stream is positioned at the beginning of the file.</li>
<li><code>w</code>: truncate a file to zero length or create text file for writing. The stream is positioned at the beginning of the file.</li>
<li><code>a</code>: open for appending (writing at end of file). The file is created if it does not exist. The stream is positioned at the end of the file.</li>
<li><code>+</code>: open for reading and writing.</li>
<li><code>b</code>: The mode string can also include the letter <strong>b</strong> either as the last character or as a character between the characters in any of the two-character strings described above. This is strictly for compatibility with <strong>C89</strong> and has no effect; the <strong>b</strong> is ignored on all <strong>POSIX</strong> conforming systems, including Linux. (Other systems may treat text files and binary files differently, and adding the <strong>b</strong> may be a good idea if you do <strong>I/O</strong> to a binary file and expect that your program may be ported to non-UNIX environments.)</li>
</ul>
</li>
<li><p>Common functions about file pointer</p>
<ul>
<li>Standard I/O function<ul>
<li><code>FILE *fopen(const char *pathname, const char *mode);</code>: open the file whose name is the string pointed to by <em>pathname</em> and associates a stream with it.  Upon  successful  completion  <u>fopen</u>(), <u>fdopen</u>() and <u>freopen</u>() return a <strong>FILE</strong> pointer. Otherwise, <strong>NULL</strong> is returned and <em>errno</em> is set to indicate the error.</li>
<li><code>int fclose(FILE *stream);</code>: flush the stream pointed to by <em>stream</em> (writing any buffered output data using fflush and closes the underlying file descriptor. Upon  successful completion, 0 is returned.  Otherwise, <strong>EOF</strong> is returned and <em>errno</em> is set to indicate the error.  In either case, any further  access  (including  another call to <u>fclose</u>()) to the stream results in undefined behavior.</li>
<li><code>long ftell(FILE *stream);</code>: obtain the current value of the file position indicator for the stream pointed to by <em>stream</em>. It returns  no  value.  Upon successful completion, it returns the current offset.  Otherwise,  -1 is returned and <em>errno</em> is set to indicate the error.</li>
<li><code>char *fgets(char *s, int size, FILE *stream);</code>: read in at most one less than <em>size</em> characters from <em>stream</em> and stores them into the buffer pointed to by <em>s</em>. Reading stops after an <strong>EOF</strong> or a newline. If a <strong>newline</strong> is read, it is stored into the buffer. A terminating null byte<strong>(‘\0’)</strong> is stored after the last character in the buffer. And it returns <strong>s</strong> on success, and <strong>NULL</strong> on error or when the end of file occurs while no characters have been read. It returns <em>s</em> on success, and <strong>NULL</strong> on error or when end of file occurs while  no characters have been read.</li>
<li><code>int fputs(const char *s, FILE *stream);</code>: write the string <em>s</em> to <em>stream</em>, without its terminating null byte<strong>(‘\0’)</strong>. And it returns a nonnegative number on success, or <strong>EOF</strong> on error.</li>
<li><code>int fscanf(FILE *stream, const char *format, ...);</code>: read input from the stream pointer <em>stream</em>. On success, it returns the number of input items successfully matched and assigned; this can be fewer than provided for, or even zero, in the event of an early matching failure. The value <strong>EOF</strong> is returned if the end of input is reached before either the first successful conversion or a matching failure occurs. <strong>EOF</strong> is also returned if a read error occurs, in which case the error indicator for the stream is set, and <em>errno</em> is set to indicate the error.</li>
<li><code>int fprintf(FILE *stream, const char *format, ...);</code>: output to a file descriptor <em>fd</em>, instead of to a stdio stream. Upon successful return, it returns the number of characters printed(excluding the null byte used to end output to strings) and If an output error is encountered, a negative value is returned.</li>
</ul>
</li>
<li>System I/O function<ul>
<li><code>int open(const char *pathname, int flags, mode_t mode);</code>: open the file specified by pathname and return a file descriptor, a small, nonnegative integer that is used in subsequent system calls to refer to the open file. The file descriptor returned by a successful call will be the lowest-numbered file descriptor not currently open for the process. The argument <em>flags</em> must include one of the following access modes: <strong>O_RDONLY</strong>, <strong>O_WRONLY</strong>, <strong>O_RDWR</strong>, <strong>O_APPEND</strong>, <strong>O_TRUNC</strong>, <strong>O_CREAT</strong> and <strong>O_EXCL</strong>. And the argument <strong>mode</strong> must be include one of the following access modes: <strong>S_IUSR</strong>, <strong>S_IWUSR</strong>, <strong>S_IXUSR</strong>, <strong>S_IRGRP</strong>, <strong>S_IWGRP</strong>, <strong>S_IXGRP</strong>, <strong>S_IROTH</strong>, <strong>S_IWOTH</strong> and <strong>S_IXOTH</strong>, or umask bit. It returns the new file descriptor, or -1 if an error occurred.</li>
<li><code>int close(int fd);</code>: close a file descriptor, so that it no longer refers to any file and may be reused and return zero on success. On error, -1 is returned, and <em>errno</em> is set appropriately.</li>
<li><code>ssize_t read(int fildes, void *buf, size_t nbyte);</code>: read <em>nbyte</em> bytes from the file associated with the open file descriptor, <em>fildes</em>, into the buffer pointed to by <em>buf</em>.  On  success,  the number of bytes read is returned (zero indicates end of file), and the file position is advanced by this number.  It is not an error if this number  is smaller  than  the  number  of  bytes requested; this may happen for example because fewer bytes are actually available right now (maybe because we were close to end-of- file,  or because we are reading from a pipe, or from a terminal), or because <u>read</u>() was interrupted by a signal. On error, -1 is returned, and <em>errno</em> is set appropriately.  In this case, it is  left unspecified whether the file position (if any) changes.</li>
<li><code>ssize_t write(int fildes, const void *buf, size_t nbyte);</code>: write <em>nbyte</em> bytes from the buffer pointed to by <em>buf</em> to the file associated with the open file descriptor, <em>fildes</em>. On  success,  the  number  of  bytes written is returned (zero indicates nothing was  written).  It is not an error if this number is smaller than the number of bytes requested;  this  may happen for example because the disk device was filled. On error, -1 is returned, and errno is set appropriately.</li>
</ul>
</li>
</ul>
</li>
<li><p>Input and output of binary file</p>
<ul>
<li><code>size_t fread(void *ptr, size_t size, size_t nmemb, FILE *stream);</code>: read <em>nmemb</em> items of data, each <em>size</em> bytes long, from the stream, pointed to by <em>stream</em>, storing them at the location given by <em>ptr</em>. </li>
<li><code>size_t fwrite(const void *ptr, size_t size, size_t nmemb, FILE *stream);</code>: write <em>nmemb</em> items of data, each <em>size</em> bytes long, to the stream pointed to by <em>stream</em>, obtaining them from the location given by <em>ptr</em>.</li>
<li>On success they return the number of items read or written. This number equals the number of bytes transferred only when <em>size</em> is 1. If an error occurs, or the end of the file is reached, the return value is a short item count (or zero).</li>
</ul>
</li>
<li><p>Other functions in file operation</p>
<ul>
<li><p><code>int fseek(FILE *stream, long offset, int whence);</code>: set the file position indicator for the stream pointed to by <em>stream</em>. The new position, measured in bytes, is obtained by adding offset bytes to the position specified by <em>whence</em>. If <em>whence</em> is set to <strong>SEEK_SET</strong>, <strong>SEEK_CUR</strong>, or <strong>SEEK_END</strong>, the offset is relative to the start of the file, the current position indicator, or end-of-file, respectively. A successful call to the <code>fseek()</code> function clears the end-of-file indicator for the stream and undoes any effects of the <code>ungetc()</code> function on the same stream. Upon successful completion, it returns 0. Otherwise, -1 is returned and <em>errno</em> is set to indicate the error.</p>
</li>
<li><p><code>int fflush(FILE *stream);</code>: force a write of all user-space buffered data for the given output or update <em>stream</em> via the stream’s underlying write function. Upon successful completion 0 is returned. Otherwise, <strong>EOF</strong> is returned and <em>errno</em> is set to indicate the error.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// count the number of words in the file</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> WHITE_SPACE_OR (c == <span class="meta-string">' '</span> || c == <span class="meta-string">'\t'</span> || c == <span class="meta-string">'\n'</span>)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> WHITE_SPACE_AND (c != <span class="meta-string">' '</span> &amp;&amp; c != <span class="meta-string">'\t'</span> &amp;&amp; c != <span class="meta-string">'\n'</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>** argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (argc != <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"usage:%s file\n"</span>, argv[<span class="number">0</span>]);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> c = <span class="number">0</span>, word = <span class="number">0</span>, flag = <span class="number">0</span>;</span><br><span class="line">    FILE* p = <span class="literal">NULL</span>;</span><br><span class="line">    p = fopen(argv[<span class="number">1</span>], <span class="string">"r"</span>);</span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"open file error!\n"</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> ((c = fgetc(p)) != EOF) &#123;</span><br><span class="line">        <span class="keyword">if</span> (WHITE_SPACE_OR) &#123;</span><br><span class="line">            flag = <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!flag &amp;&amp; WHITE_SPACE_AND) &#123;</span><br><span class="line">            word++;</span><br><span class="line">            flag = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(p);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"total of word:%d\n"</span>, word);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>

    </div>

    
    
    
      <div style="text-align:center;color: #ccc;font-size:14px;">---------------- The End ----------------</div>
        
      
        <div id="reward-container">
  <div>Donate comment here.</div>
  <button id="reward-button" disable="enable" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    Donate
  </button>
  <div id="qr" style="display: none;">
        
      
      <div style="display: inline-block">
        <img src="/images/wechatpay.png" alt="YiHe Huang WeChat Pay">
        <p>WeChat Pay</p>
      </div>
        
      
      <div style="display: inline-block">
        <img src="/images/alipay.png" alt="YiHe Huang Alipay">
        <p>Alipay</p>
      </div>

  </div>
</div>

      
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>Post author:  </strong>YiHe Huang</li>
  <li class="post-copyright-link">
    <strong>Post link: </strong>
    <a href="http://youthfaith.cn/2018/11/07/AdvancedKnowledgeofC/" title="Advanced Knowledge of C Language">http://youthfaith.cn/2018/11/07/AdvancedKnowledgeofC/</a>
  </li>
  <li class="post-copyright-license">
    <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> unless stating additionally.</li>
<li>
     <strong>No reproduction without permission.</strong>
</li>
</ul>
</div>

      

      <footer class="post-footer">
          
            
          
          <div class="post-tags">
            
              <a href="/tags/C-Language/" rel="tag"><i class="fa fa-tag"></i> C Language</a>
            
              <a href="/tags/Advanced-Knowledge/" rel="tag"><i class="fa fa-tag"></i> Advanced Knowledge</a>
            
          </div>
        

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/2018/10/07/BasicKnowledgeofC/" rel="next" title="Basic Knowledge of C Language">
                  <i class="fa fa-chevron-left"></i> Basic Knowledge of C Language
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/2019/01/07/ProcessManagement/" rel="prev" title="Process Management">
                  Process Management <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        
      </footer>
    
  </div>
  
  
  
  </article>

  </div>


          </div>
          
    
    <div class="comments" id="gitalk-container"></div>
  

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">
        
        
        
        
      

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc" data-target="post-toc-wrap">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview" data-target="site-overview-wrap">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Advanced-Knowledge-of-Function"><span class="nav-number">1.</span> <span class="nav-text">Advanced Knowledge of Function</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Memory-Management-in-Linux"><span class="nav-number">1.1.</span> <span class="nav-text">Memory Management in Linux</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Scope-and-Storage-Type"><span class="nav-number">1.2.</span> <span class="nav-text">Scope and Storage Type</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Function-Calling"><span class="nav-number">1.3.</span> <span class="nav-text">Function Calling</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Function-Pointer"><span class="nav-number">1.4.</span> <span class="nav-text">Function Pointer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Variable-Argument-List"><span class="nav-number">1.5.</span> <span class="nav-text">Variable Argument List</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Basic-Knowledge-of-String"><span class="nav-number">2.</span> <span class="nav-text">Basic Knowledge of String</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Character-Array"><span class="nav-number">2.1.</span> <span class="nav-text">Character Array</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Standard-Library-Functions"><span class="nav-number">3.</span> <span class="nav-text">Standard Library Functions</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Common-Functions-in-stdlib-h"><span class="nav-number">3.1.</span> <span class="nav-text">Common Functions in stdlib.h</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Common-Functions-in-math-h"><span class="nav-number">3.2.</span> <span class="nav-text">Common Functions in math.h</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Common-Functions-in-time-h"><span class="nav-number">3.3.</span> <span class="nav-text">Common Functions in time.h</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Structure-and-Union"><span class="nav-number">4.</span> <span class="nav-text">Structure and Union</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#What-is-Structure"><span class="nav-number">4.1.</span> <span class="nav-text">What is Structure</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Byte-Alignment"><span class="nav-number">4.2.</span> <span class="nav-text">Byte Alignment</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#What-is-Union"><span class="nav-number">4.3.</span> <span class="nav-text">What is Union</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Difference-Between-Typedef-and-Define"><span class="nav-number">4.4.</span> <span class="nav-text">Difference Between Typedef and Define</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Advanced-Knowledge-of-Pointer"><span class="nav-number">5.</span> <span class="nav-text">Advanced Knowledge of Pointer</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Untyped-Pointer"><span class="nav-number">5.1.</span> <span class="nav-text">Untyped Pointer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Two-dimensional-Array"><span class="nav-number">5.2.</span> <span class="nav-text">Two-dimensional Array</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Pointer-Array"><span class="nav-number">5.3.</span> <span class="nav-text">Pointer Array</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Dynamic-Memory-Allocation"><span class="nav-number">6.</span> <span class="nav-text">Dynamic Memory Allocation</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Memory-Allocation"><span class="nav-number">6.1.</span> <span class="nav-text">Memory Allocation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Common-Functions"><span class="nav-number">6.2.</span> <span class="nav-text">Common Functions</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Preprocess"><span class="nav-number">7.</span> <span class="nav-text">Preprocess</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#What-is-Preprocess"><span class="nav-number">7.1.</span> <span class="nav-text">What is Preprocess</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Macro-Substitution"><span class="nav-number">7.2.</span> <span class="nav-text">Macro Substitution</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Conditional-Compile"><span class="nav-number">7.3.</span> <span class="nav-text">Conditional Compile</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#File-Including"><span class="nav-number">7.4.</span> <span class="nav-text">File Including</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#File-Operation"><span class="nav-number">8.</span> <span class="nav-text">File Operation</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#File-System"><span class="nav-number">8.1.</span> <span class="nav-text">File System</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#File-Pointer"><span class="nav-number">8.2.</span> <span class="nav-text">File Pointer</span></a></li></ol></li></ol></div>
        
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="/images/avatar.gif"
      alt="YiHe Huang">
  <p class="site-author-name" itemprop="name">YiHe Huang</p>
  <div class="site-description" itemprop="description">YouthFaith's Blog</div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">4</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        
        
          
        
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">categories</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">tags</span>
        </a>
      </div>
    
  </nav>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://github.com/YouthFaith" title="GitHub &rarr; https://github.com/YouthFaith" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="mailto:huangyihe52647849@gmail.com" title="E-Mail &rarr; mailto:huangyihe52647849@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://twitter.com/youthfaith1" title="Twitter &rarr; https://twitter.com/youthfaith1" rel="noopener" target="_blank"><i class="fa fa-fw fa-twitter"></i>Twitter</a>
      </span>
    
  </div>
  <div class="cc-license motion-element" itemprop="license">
    
  
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title">
      <i class="fa fa-fw fa-link"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://dzblog.cn" title="https://dzblog.cn" rel="noopener" target="_blank">Wintermelon's Blog</a>
        </li>
      
        <li class="links-of-blogroll-item">
          <a href="https://crossoverjie.top" title="https://crossoverjie.top" rel="noopener" target="_blank">crossoverJie's Blog</a>
        </li>
      
        <li class="links-of-blogroll-item">
          <a href="https://yangbingdong.com" title="https://yangbingdong.com" rel="noopener" target="_blank">ookamiAntD's Blog</a>
        </li>
      
        <li class="links-of-blogroll-item">
          <a href="https://xiaozhou.net/" title="https://xiaozhou.net/" rel="noopener" target="_blank">Timothy's Blog</a>
        </li>
      
        <li class="links-of-blogroll-item">
          <a href="https://zww.me" title="https://zww.me" rel="noopener" target="_blank">ZWWoOoOo's Blog</a>
        </li>
      
        <li class="links-of-blogroll-item">
          <a href="https://www.jitwxs.cn/" title="https://www.jitwxs.cn/" rel="noopener" target="_blank">Jitwxs's Blog</a>
        </li>
      
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2018 – <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">YiHe Huang</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    <span title="Symbols count total">112k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">1:42</span>
</div>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="Total Visitors">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  
    <span class="post-meta-divider">|</span>
  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="Total Views">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>












        
      </div>
    </footer>
  </div>

  
    
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='158' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/jquery/index.js?v=3.4.1"></script>
  <script src="//cdn.jsdelivr.net/npm/medium-zoom@1/dist/medium-zoom.min.js"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/utils.js?v=7.3.0"></script><script src="/js/motion.js?v=7.3.0"></script>
<script src="/js/schemes/muse.js?v=7.3.0"></script>
<script src="/js/next-boot.js?v=7.3.0"></script>



  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>








  <script src="/js/local-search.js?v=7.3.0"></script>














  

  
    
      
<script type="text/x-mathjax-config">

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });

  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') {
          next = next.nextSibling;
        }
        if (next && next.nodeName.toLowerCase() === 'br') {
          next.parentNode.removeChild(next);
        }
      }
    });
  });

  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      element = document.getElementById(all[i].inputID + '-Frame').parentNode;
      if (element.nodeName.toLowerCase() == 'li') {
        element = element.parentNode;
      }
      element.classList.add('has-jax');
    }
  });
</script>
<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML', () => {
    MathJax.Hub.Typeset();
  }, window.MathJax);
</script>

    
  

  

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: 'a78a0cd3150929e4d6b0',
      clientSecret: '6f4f19733838d199a701705a5c56ac19b2c029ce',
      repo: 'youthfaith-talk',
      owner: 'YouthFaith',
      admin: ['YouthFaith'],
      id: '662fe1e5bde654979c7c8b2e1acc40e2',
        language: 'en',
      
      distractionFreeMode: 'false'
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
</script>

  <script type="text/javascript" src="/js/src/clipboard.min.js"></script>  
  <script type="text/javascript" src="/js/src/clipboard-use.js"></script>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1,"jsonPath":"/live2dw/assets/haruto.model.json"},"display":{"superSample":2,"width":150,"height":230,"position":"right"},"mobile":{"show":true},"react":{"opacityDefault":0.9,"opacityOnHover":0.5},"log":false});</script></body>
</html>
